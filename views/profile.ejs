<%- include('shared/header.ejs')%> 

<body id="home">

<%- include('shared/navbar.ejs')%> 


<div class="cover">

</div>

<div class="container">
    <div class="row">
        <div class="col-md-4 ">
            <div class="person card pb-5 px-5  text-center">
                <img src="images/man.jpg" width="250" alt="">
            </div>
        </div>
        <div class="col-md-8 pt-4">
                <h2><%= uname %> </h2>

            <h4 class="text-muted">Full Stack Web</h4>

                <% for( let index = 0; index < userPosts.length; index++ ) { %>
                    <div class="post card p-4 auto">
                        <div class="media">
                            <img src="images/man.jpg" width="60" class="mr-3" alt="...">
                            <div class="media-body">
                                <% if (userPosts.length && userPosts[index].userID.email == userIDHasPost) { %>
                                    <!-- dropDown -->
                                    <div class="dropdown float-right text-dark">
                                        
                                        <i class="fas fa-ellipsis-v" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                                        
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a onclick='getID("<%= userPosts[index]._id %>");getTitle("<%= userPosts[index].title %>");getText("<%= userPosts[index].text %>")' class="dropdown-item" data-toggle="modal" data-target="#editModal">Edit<i class="fas fa-pen-square text-info float-right"></i></a>
                                        <a onclick='getID("<%= userPosts[index]._id %>")' class="dropdown-item" data-toggle="modal" data-target="#deleteModal">Delete<i class="fas fa-trash text-danger float-right"></i></a>
                                        </div>
                                    </div>
                                    <!--  -->
                                <% } %>
                                <% if (userPosts.length) { %>
                                    <h5 class="mt-0"><%= userPosts[index].userID.uname%> </h5>
    
                                <% } %>
                                <%= userPosts[index].time%>
                            </div>
                        </div>
                        <hr>
                        <h3><%= userPosts[index].title%></h3>
                        <p class="pt-4">
                            <%= userPosts[index].text%>
                        </p>
        
                    </div>
                <% } %>

        </div>
    </div>
</div>
              <!-- Modal update -->
              <form method="POST" action="/updateProfile">
                <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel"><span>Edit Post</span></h5>
                        
                
                
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <input id="updatePostTitle" name="title"  type="text" class="form-control" placeholder="Title" > 
                        <textarea placeholder="text" class="form-control mt-3" name="text" id="updatePostText" cols="30" rows="10"></textarea>
                      </div>
                      <div class="modal-footer">
                        <input hidden id="updatePost" class="form-control" name="id" type="text">

                          <button  type="submit" class="btn btn-primary">Edit</button>
                        <button type="submit" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                      </div>
                    </div>
                  </div>
                </div>
              </form>    
             <!--  -->
            <!-- Modal  delete-->
              
                            <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                              <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel"><span>Delete Note</span></h5>
                                    
                            
                            <form action="/deleteProfile" method="POST">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                  </div>
                                  <div class="modal-body">
                                    <input hidden id="deletePost" class="form-control" name="delete" type="text">

                                    <p class="text-danger">Are you really want to delete?<br>
                                    process cannot be done
                                    </p>
                                  </div>
                                  <div class="modal-footer">
                                      <button  type="submit" class="btn btn-primary">Delete</button>
                                    <button type="submit" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                  
                                </div>
                            </form>

                            </div>
                              </div>
                            </div>               
              
                            <!--  -->

<%- include('shared/footer.ejs')%> 
